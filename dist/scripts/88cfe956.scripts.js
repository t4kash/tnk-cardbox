(function(){"use strict";var a,b;a="a8f150d43aec60003889f014317dbbe73380925c62e72b4e672ff0ff6cc2326c",b="d48b3fb6162b5c0e06bca7047866a30e2fc8b85bc12a2d8f9a5a476d571e57cc",NCMB.initialize(a,b),angular.module("tnkCardboxApp",["ngRoute","ngCsv"]).config(["$routeProvider",function(a){return a.when("/",{templateUrl:"views/login.html",controller:"LoginCtrl"}).when("/main",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}])}).call(this),function(){"use strict";angular.module("tnkCardboxApp").controller("LoginCtrl",["$scope","$location",function(a,b){return NCMB.User.current()?void b.path("/main"):(a.processing=!1,a.login=function(b){return b.$invalid?void 0:(a.processing=!0,NCMB.User.logIn(a.loginId,a.loginPassword,{success:function(){return a.gotoMain()},error:function(b,c){return console.log(c),alert("E401002"===c.code?"IDもしくはパスワードのエラー":"ログインできません:"+c.code),a.$apply(function(){return a.processing=!1})}}))},a.userRegistration=function(b){var c;if(!b.$invalid&&confirm("ユーザー登録を行いますか？"))return c=new NCMB.User,c.set("userName",a.loginId),c.set("password",a.loginPassword),c.signUp(null,{success:function(){return a.gotoMain()},error:function(a,b){return console.log(b),alert("E409001"===b.code?"すでに使用されているIDです":"登録エラー:"+b.code)}})},a.gotoMain=function(){return a.$apply(function(){return b.path("/main"),a.processing=!1})})}])}.call(this),function(){"use strict";angular.module("tnkCardboxApp").controller("MainCtrl",["$scope","$location",function(a,b){return a.logout=function(){return NCMB.User.logOut(),b.path("/")},NCMB.User.current()?(a.items=[],a.predicate="rarity",a.reverse=!0,a.fetchCard=function(){var b,c;return b=NCMB.Object.extend("Card"),c=new NCMB.Query(b),c.find({success:function(b){return console.log(b),a.$apply(function(){var c,d,e,f;for(a.items=[],f=[],d=0,e=b.length;e>d;d++)c=b[d],f.push(a.items.push(c.attributes));return f})},error:function(b){return console.log(b.code+" "+b.message),"E401001"===b.code?a.logout():void 0}})},a.fetchCard(),a.sort=function(b){return b===a.predicate?a.reverse=!a.reverse:(a.predicate=b,a.reverse=!1)},a.sortClass=function(b){return b!==a.predicate?"fa-sort":a.reverse?"fa-sort-desc":"fa-sort-asc"},a.csvData=function(){var b;return b=[],angular.forEach(a.items,function(a){return b.push({name:a.name,nameKana:a.nameKana,rarity:a.rarity,region:a.region,level:a.level,maxLevel:a.maxLevel,extendLevel:a.extendLevel,cost:a.cost,attack:a.attack,defence:a.defence,type:a.type,skill:a.skill,skillLevel:a.skillLevel,skillName:a.skillName})}),b}):void a.logout()}])}.call(this),function(){"use strict";angular.module("tnkCardboxApp").filter("rarity",function(){return function(a){var b;return b={normal:"N",rare:"R",hrare:"HR",srare:"S",ssrare:"SS",special:"SP"},b[a]}})}.call(this);