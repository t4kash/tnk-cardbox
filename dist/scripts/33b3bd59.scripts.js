(function(){"use strict";var a,b;a="4ofkpZSUMjDDFQowUnV7rrdTPb01XXhuKncyQt5b",b="BSr5oeZvUrD3ZZZly8W170VQ81A9Q0stDU0f61iL",Parse.initialize(a,b),angular.module("tnkCardboxApp",["ngRoute","ngCsv"]).config(["$routeProvider",function(a){return a.when("/",{templateUrl:"views/login.html",controller:"LoginCtrl"}).when("/main",{templateUrl:"views/main.html",controller:"MainCtrl"}).otherwise({redirectTo:"/"})}])}).call(this),function(){"use strict";angular.module("tnkCardboxApp").controller("LoginCtrl",["$scope","$location",function(a,b){return Parse.User.current()?void b.path("/main"):(a.processing=!1,a.login=function(b){return b.$invalid?void 0:(a.processing=!0,Parse.User.logIn(a.loginId,a.loginPassword,{success:function(){return a.gotoMain()},error:function(b,c){return console.log(c),alert(c.code===Parse.Error.OBJECT_NOT_FOUND?"IDもしくはパスワードのエラー":"ログインできません:"+c.code),a.$apply(function(){return a.processing=!1})}}))},a.userRegistration=function(b){return!b.$invalid&&confirm("ユーザー登録を行いますか？")?Parse.User.signUp(a.loginId,a.loginPassword,{ACL:new Parse.ACL},{success:function(){return a.gotoMain()},error:function(a,b){return console.log(b),alert(b.code===Parse.Error.USERNAME_TAKEN?"すでに使用されているIDです":"登録エラー:"+b.code)}}):void 0},a.gotoMain=function(){return a.$apply(function(){return b.path("/main"),a.processing=!1})})}])}.call(this),function(){"use strict";angular.module("tnkCardboxApp").controller("MainCtrl",["$scope","$location",function(a,b){return a.logout=function(){return Parse.User.logOut(),b.path("/")},Parse.User.current()?(a.items=[],a.predicate="rarity",a.reverse=!0,a.fetchCard=function(){var b,c;return b=Parse.Object.extend("Card"),c=new Parse.Query(b),c.equalTo("user",Parse.User.current()),c.find({success:function(b){return console.log("total: "+b.length),a.$apply(function(){var c,d,e,f;for(a.items=[],f=[],d=0,e=b.length;e>d;d++)c=b[d],f.push(a.items.push(c.attributes));return f})},error:function(b){return console.log(b.code+" "+b.message),b.code===Parse.Error.OBJECT_NOT_FOUND?a.logout():void 0}})},a.fetchCard(),a.sort=function(b){return b===a.predicate?a.reverse=!a.reverse:(a.predicate=b,a.reverse=!1)},a.sortClass=function(b){return b!==a.predicate?"fa-sort":a.reverse?"fa-sort-desc":"fa-sort-asc"},a.csvData=function(){var b;return b=[],angular.forEach(a.items,function(a){return b.push({name:a.name,nameKana:a.nameKana,rarity:a.rarity,region:a.region,level:a.level,maxLevel:a.maxLevel,extendLevel:a.extendLevel,cost:a.cost,attack:a.attack,defence:a.defence,type:a.type,skill:a.skill,skillLevel:a.skillLevel,skillName:a.skillName})}),b}):void a.logout()}])}.call(this),function(){"use strict";angular.module("tnkCardboxApp").filter("rarity",function(){return function(a){var b;return b={normal:"N",rare:"R",hrare:"HR",srare:"S",ssrare:"SS",special:"SP"},b[a]}})}.call(this);